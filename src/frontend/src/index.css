@import "tailwindcss";
@import "maplibre-gl/dist/maplibre-gl.css";

:root, [data-theme="light"] {
  --bg-primary:       #FFFFFF;
  --bg-secondary:     #F7F8FA;
  --bg-tertiary:      #EDF0F4;
  --bg-card:          #FFFFFF;
  --border:           #DDE1E8;
  --border-light:     #EBEEF3;
  --text-primary:     #1A1F36;
  --text-secondary:   #5E6687;
  --text-muted:       #8E94A9;
  --accent-primary:   #0050B3;
  --accent-secondary: #1890FF;
  --accent-hover:     #E6F4FF;
  --semantic-positive:#52C41A;
  --semantic-negative:#F5222D;
  --semantic-warning: #FA8C16;
  --semantic-neutral: #8C8C8C;
  --semantic-negative-bg: #FFF1F0;
  --chart-1:          #0050B3;
  --chart-2:          #1890FF;
  --chart-3:          #40A9FF;
  --chart-4:          #69C0FF;
  --chart-5:          #91D5FF;
  --chart-accent:     #F5222D;
}

[data-theme="dark"] {
  --bg-primary:       #0F1629;
  --bg-secondary:     #151B2E;
  --bg-tertiary:      #1C2438;
  --bg-card:          #1C2438;
  --border:           #2A3352;
  --border-light:     #232B45;
  --text-primary:     #E8ECF4;
  --text-secondary:   #A0AECB;
  --text-muted:       #6B7A99;
  --accent-primary:   #4DA3FF;
  --accent-secondary: #69B4FF;
  --accent-hover:     #1C2438;
  --semantic-positive:#6ADE4A;
  --semantic-negative:#FF6B6B;
  --semantic-warning: #FFB347;
  --semantic-neutral: #8C8C8C;
  --semantic-negative-bg: #2A1520;
  --chart-1:          #4DA3FF;
  --chart-2:          #69B4FF;
  --chart-3:          #85C5FF;
  --chart-4:          #A0D6FF;
  --chart-5:          #BCE7FF;
  --chart-accent:     #FF6B6B;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-family: 'Source Sans 3', 'Segoe UI', system-ui, -apple-system, sans-serif;
  overflow: hidden;
  height: 100vh;
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

#root { height: 100vh; display: flex; flex-direction: column; }

/* Focus styles for keyboard accessibility */
button:focus-visible,
select:focus-visible,
[role="tab"]:focus-visible,
[role="switch"]:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
}

.font-mono { font-family: 'IBM Plex Mono', 'SF Mono', monospace; }

.card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  transition: box-shadow 0.2s ease;
}
.card:hover {
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.02em;
}
.badge-blue { background: #E6F4FF; color: #0050B3; }
.badge-green { background: #F6FFED; color: #389E0D; }
.badge-red { background: #FFF1F0; color: #CF1322; }
.badge-orange { background: #FFF7E6; color: #D46B08; }
.badge-gray { background: #F5F5F5; color: #595959; }

.tab-bar {
  display: flex;
  border-bottom: 1px solid var(--border);
  gap: 0;
}
.tab-item {
  padding: 10px 16px;
  font-size: 13px;
  font-weight: 400;
  color: var(--text-secondary);
  border: none;
  background: transparent;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.15s, border-color 0.15s;
  font-family: inherit;
}
.tab-item:hover { color: var(--text-primary); }
.tab-item.active {
  color: var(--accent-primary);
  font-weight: 600;
  border-bottom-color: var(--accent-primary);
}

.section-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  margin-bottom: 12px;
}

.data-source {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
}

/* Loading skeleton */
@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}
.skeleton {
  background: var(--border);
  border-radius: 4px;
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}
.skeleton-bar { height: 14px; margin-bottom: 8px; }
.skeleton-bar:nth-child(1) { width: 90%; }
.skeleton-bar:nth-child(2) { width: 70%; }
.skeleton-bar:nth-child(3) { width: 80%; }
.skeleton-bar:nth-child(4) { width: 60%; }
.skeleton-bar:nth-child(5) { width: 75%; }
.skeleton-kpi { width: 100%; height: 48px; border-radius: 8px; margin-bottom: 8px; }
.skeleton-chart { width: 100%; height: 180px; border-radius: 8px; margin-bottom: 12px; }

/* Fade-in transition */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}
.fade-in {
  animation: fade-in 0.3s ease-out forwards;
}

/* Responsive */
@media (max-width: 1024px) {
  .main-layout { flex-direction: column !important; }
  .side-panel {
    width: 100% !important;
    height: 50vh !important;
    border-left: none !important;
    border-top: 1px solid var(--border) !important;
  }
}
@media (max-width: 768px) {
  .kpi-strip {
    padding: 8px 12px !important;
    gap: 8px !important;
  }
  .kpi-strip .card {
    min-width: 110px !important;
    padding: 8px 10px !important;
  }
  .kpi-strip .card > div:first-child {
    font-size: 18px !important;
  }
  .tab-item {
    padding: 8px 10px !important;
    font-size: 11px !important;
  }
  .header-desktop-info { display: none !important; }
}

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-secondary); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

.recharts-text { fill: var(--text-secondary) !important; font-size: 11px !important; font-family: 'Source Sans 3', sans-serif !important; }
.recharts-cartesian-grid line { stroke: var(--border-light) !important; }
.recharts-tooltip-wrapper .recharts-default-tooltip {
  background: var(--bg-card) !important;
  border: 1px solid var(--border) !important;
  border-radius: 6px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
}
.recharts-legend-item-text { color: var(--text-secondary) !important; font-size: 10px !important; }

/* Dark mode badge overrides */
[data-theme="dark"] .badge-blue { background: rgba(77, 163, 255, 0.15); color: #4DA3FF; }
[data-theme="dark"] .badge-green { background: rgba(106, 222, 74, 0.15); color: #6ADE4A; }
[data-theme="dark"] .badge-red { background: rgba(255, 107, 107, 0.15); color: #FF6B6B; }
[data-theme="dark"] .badge-orange { background: rgba(255, 179, 71, 0.15); color: #FFB347; }
[data-theme="dark"] .badge-gray { background: rgba(140, 140, 140, 0.15); color: #A0AECB; }

/* Dark mode select styling */
[data-theme="dark"] select {
  color-scheme: dark;
}

/* Smooth transitions between themes */
body, .card, .tab-item, .badge, header, footer {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* Mobile: stack tabs horizontally with scroll */
@media (max-width: 768px) {
  .tab-bar {
    overflow-x: auto;
    flex-wrap: nowrap !important;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .tab-bar::-webkit-scrollbar { display: none; }
  .tab-bar .tab-item { white-space: nowrap; }
}
